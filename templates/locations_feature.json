{% whitespace oneline %}
{
  "type": "Feature",
  "id": "{{ location.id }}",
  "geometry": {
    "type": "{{ location.geometry_type }}",
    {% set n_coord_vals = len(location.coords) %}
    "coordinates": [
    {% for i, coord in enumerate(location.coords, 1) %}
      "{{ coord }}"{% if i < n_coord_vals %},{% end %}
    {% end %}
    ]
  },
  "properties": {
  {% for key, value in location.properties.items() %}
    "{{ key }}": "{{ value }}",
  {% end %}
    "extent": {
      "spatial": {
        {% set bbox_point_ct = len(location.bbox) %}
        "bbox": [
          {% for i, value in enumerate(location.bbox, 1) %}
          {{ value }}{% if i < bbox_point_ct %},{% end %}
          {% end %}
        ]
      }
      {% set t_interval_ct = len(location.temporal_interval) %}
      {% if t_interval_ct %},
      "temporal": {
        "interval": [
          [
            {% for i, interval in enumerate(location.temporal_interval, 1) %}
            "{{ interval }}"{% if i < t_interval_ct %},{% end %}
            {% end %}
          ]
        ]
      }
      {% end %}
      {% set v_interval_ct = len(location.vertical_interval) %}
      {% if v_interval_ct %},
      "vertical": {
        "interval": [
          [
            {% for i, interval in enumerate(location.vertical_interval, 1) %}
            {{ interval }}{% if i < v_interval_ct %},{% end %}
            {% end %}
          ]
        ]
      }
      {% end %}
    },
    {% set param_count = len(location.parameters) %}
    "parameter_names": {
      {% for i, parameter in enumerate(location.parameters, 1) %}
        {% module Template("location_parameter_param.json", parameter=parameter) %}{% if i < param_count %},{% end %}
      {% end %}
    }
  }
}